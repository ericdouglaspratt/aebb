var stations = [
  {
    "id": 3,
    "name": "Colleges of the Fenway - Fenway at Avenue Louis Pasteur",
    "lat": 42.340115,
    "long": -71.100619,
    "photo": "photos/colleges-of-the-fenway.jpg"
  },
  {
    "id": 4,
    "name": "Tremont St at E Berkeley St",
    "lat": 42.345392,
    "long": -71.069616,
    "photo": "photos/tremont-st-at-e-berkeley-st.jpg"
  },
  {
    "id": 5,
    "name": "Northeastern University - North Parking Lot",
    "lat": 42.341814,
    "long": -71.090179
  },
  {
    "id": 6,
    "name": "Cambridge St at Joy St",
    "lat": 42.361304,
    "long": -71.06521
  },
  {
    "id": 7,
    "name": "Fan Pier",
    "lat": 42.352941,
    "long": -71.043885,
    "photo": "photos/fan-pier.jpg"
  },
  {
    "id": 8,
    "name": "Union Square - Brighton Ave at Cambridge St",
    "lat": 42.353334,
    "long": -71.137313
  },
  {
    "id": 9,
    "name": "Commonwealth Ave at Agganis Way",
    "lat": 42.351246,
    "long": -71.115639,
    "photo": "photos/commonwealth-at-amory-st.jpg"
  },
  {
    "id": 10,
    "name": "B.U. Central - 725 Comm. Ave.",
    "lat": 42.350406,
    "long": -71.108279,
    "photo": "photos/bu-central-725-comm-ave.jpg"
  },
  {
    "id": 11,
    "name": "Longwood Ave at Binney St",
    "lat": 42.338629,
    "long": -71.1065,
    "photo": "photos/longwood-ave-at-binney-st.jpg"
  },
  {
    "id": 12,
    "name": "Ruggles T Stop - Columbus Ave at Melnea Cass Blvd",
    "lat": 42.336282,
    "long": -71.088019,
    "photo": "photos/ruggles-t-stop.jpg"
  },
  {
    "id": 14,
    "name": "HMS/HSPH - Avenue Louis Pasteur at Longwood Ave",
    "lat": 42.337417,
    "long": -71.102861,
    "photo": "photos/avenue-louis-pasteur-at-longwood-ave.jpg"
  },
  {
    "id": 15,
    "name": "Brighton Mills - 370 Western Ave",
    "lat": 42.361546,
    "long": -71.137762
  },
  {
    "id": 16,
    "name": "Back Bay T Stop - Dartmouth St at Stuart St",
    "lat": 42.348074,
    "long": -71.07657,
    "photo": "photos/back-bay-t-stop.jpg"
  },
  {
    "id": 17,
    "name": "Soldiers Field Park - 111 Western Ave",
    "lat": 42.365064,
    "long": -71.119233
  },
  {
    "id": 19,
    "name": "Park Dr at Buswell St",
    "lat": 42.347241,
    "long": -71.105301
  },
  {
    "id": 20,
    "name": "Aquarium T Stop - 200 Atlantic Ave",
    "lat": 42.359912,
    "long": -71.05143,
    "photo": "photos/aquarium-t-stop.jpg"
  },
  {
    "id": 21,
    "name": "Prudential Center - Belvedere St",
    "lat": 42.345959,
    "long": -71.082578,
    "photo": "photos/prudential-center.jpg"
  },
  {
    "id": 22,
    "name": "South Station - 700 Atlantic Ave",
    "lat": 42.352175,
    "long": -71.055547,
    "photo": "photos/south-station.jpg"
  },
  {
    "id": 23,
    "name": "Boston City Hall - 28 State St",
    "lat": 42.35892,
    "long": -71.057629
  },
  {
    "id": 24,
    "name": "Seaport Square - Seaport Blvd at Northern Ave",
    "lat": 42.351482,
    "long": -71.044361,
    "photo": "photos/seaport-square.jpg"
  },
  {
    "id": 25,
    "name": "South End Library - Tremont St at W Newton St",
    "lat": 42.341332,
    "long": -71.076847,
    "photo": "photos/south-end-library.jpg"
  },
  {
    "id": 26,
    "name": "Washington St at Waltham St",
    "lat": 42.341522,
    "long": -71.068922
  },
  {
    "id": 27,
    "name": "Roxbury Crossing T Stop - Columbus Ave at Tremont St",
    "lat": 42.331184,
    "long": -71.095171,
    "photo": "photos/roxbury-crossing-t-stop.jpg"
  },
  {
    "id": 29,
    "name": "Innovation Lab - 125 Western Ave at Batten Way",
    "lat": 42.363732,
    "long": -71.124565
  },
  {
    "id": 30,
    "name": "Brigham Circle - Francis St at Huntington Ave",
    "lat": 42.334398,
    "long": -71.105079,
    "photo": "photos/brigham-circle.jpg"
  },
  {
    "id": 31,
    "name": "Seaport Hotel - Congress St at Seaport Ln",
    "lat": 42.34896,
    "long": -71.041998,
    "photo": "photos/seaport-hotel.jpg"
  },
  {
    "id": 32,
    "name": "Landmark Center - Brookline Ave at Park Dr",
    "lat": 42.345194,
    "long": -71.101697
  },
  {
    "id": 33,
    "name": "Kenmore Square",
    "lat": 42.348706,
    "long": -71.097009
  },
  {
    "id": 35,
    "name": "Arch St at Franklin St",
    "lat": 42.355302,
    "long": -71.058256
  },
  {
    "id": 36,
    "name": "Copley Square - Dartmouth St at Boylston St",
    "lat": 42.349767,
    "long": -71.077327,
    "photo": "photos/copley-square.jpg"
  },
  {
    "id": 37,
    "name": "New Balance - 20 Guest St",
    "lat": 42.357329,
    "long": -71.146735
  },
  {
    "id": 39,
    "name": "Washington St at Rutland St",
    "lat": 42.338515,
    "long": -71.074041
  },
  {
    "id": 40,
    "name": "Lewis Wharf at Atlantic Ave",
    "lat": 42.363871,
    "long": -71.050877,
    "photo": "photos/lewis-wharf-at-atlantic-ave.jpg"
  },
  {
    "id": 41,
    "name": "Packard's Corner - Commonwealth Ave at Brighton Ave",
    "lat": 42.352261,
    "long": -71.123831
  },
  {
    "id": 42,
    "name": "Boylston St at Arlington St",
    "lat": 42.352033,
    "long": -71.070627,
    "photo": "photos/boylston-st-at-arlington-st.jpg"
  },
  {
    "id": 43,
    "name": "Rowes Wharf at Atlantic Ave",
    "lat": 42.357143,
    "long": -71.050699,
    "photo": "photos/rowes-wharf.jpg"
  },
  {
    "id": 44,
    "name": "Congress St at North St",
    "lat": 42.360613,
    "long": -71.057452
  },
  {
    "id": 45,
    "name": "Jersey St. at Boylston St.",
    "lat": 42.344681,
    "long": -71.097853,
    "photo": "photos/jersey-st-at-boylston-st.jpg"
  },
  {
    "id": 46,
    "name": "Christian Science Plaza - Massachusetts Ave at Westland Ave",
    "lat": 42.343666,
    "long": -71.085824,
    "photo": "photos/christian-science-plaza.jpg"
  },
  {
    "id": 47,
    "name": "Cross St at Hanover St",
    "lat": 42.362811,
    "long": -71.056067,
    "photo": "photos/cross-st-at-hanover-st.jpg"
  },
  {
    "id": 48,
    "name": "Post Office Square - Pearl St at Milk St",
    "lat": 42.356755,
    "long": -71.055407
  },
  {
    "id": 49,
    "name": "Stuart St at Charles St",
    "lat": 42.351146,
    "long": -71.066289,
    "photo": "photos/stuart-st-at-charles-st.jpg"
  },
  {
    "id": 50,
    "name": "Boylston St at Berkeley St",
    "lat": 42.351142,
    "long": -71.073292,
    "photo": "photos/boylston-st-at-berkeley-st.jpg"
  },
  {
    "id": 51,
    "name": "Washington St at Lenox St",
    "lat": 42.335099,
    "long": -71.079038
  },
  {
    "id": 52,
    "name": "Newbury St at Hereford St",
    "lat": 42.348717,
    "long": -71.085954,
    "photo": "photos/newbury-st-at-hereford-st.jpg"
  },
  {
    "id": 53,
    "name": "Beacon St at Massachusetts Ave",
    "lat": 42.350827,
    "long": -71.089811,
    "photo": "photos/beacon-st-at-mass-ave.jpg"
  },
  {
    "id": 54,
    "name": "Tremont St at West St",
    "lat": 42.354979,
    "long": -71.063348
  },
  {
    "id": 55,
    "name": "Boylston St at Massachusetts Ave",
    "lat": 42.347265,
    "long": -71.088088,
    "photo": "photos/boylston-st-at-massachusetts-ave.jpg"
  },
  {
    "id": 56,
    "name": "Dudley Square - Dudley St at Warren St",
    "lat": 42.32854,
    "long": -71.084165
  },
  {
    "id": 57,
    "name": "Columbus Ave at Massachusetts Ave",
    "lat": 42.340542615516,
    "long": -71.081388479142,
    "photo": "photos/massachusetts-ave-at-columbus-ave.jpg"
  },
  {
    "id": 58,
    "name": "Mugar Way at Beacon St",
    "lat": 42.355549,
    "long": -71.072842,
    "photo": "photos/beacon-st-arlington-st.jpg"
  },
  {
    "id": 59,
    "name": "Chinatown Gate Plaza",
    "lat": 42.351356,
    "long": -71.059367,
    "photo": "photos/chinatown-gate-plaza.jpg"
  },
  {
    "id": 60,
    "name": "Charles Circle - Charles St at Cambridge St",
    "lat": 42.360714,
    "long": -71.070928,
    "photo": "photos/charles-circle-charles-st-at-cambridge-st.jpg"
  },
  {
    "id": 61,
    "name": "Boylston St at Fairfield St",
    "lat": 42.348762,
    "long": -71.082383,
    "photo": "photos/boylston-st-at-fairfield-st.jpg"
  },
  {
    "id": 63,
    "name": "Dorchester Ave at Gillette Park",
    "lat": 42.344041,
    "long": -71.057376
  },
  {
    "id": 64,
    "name": "Congress St at Sleeper St",
    "lat": 42.351004,
    "long": -71.0493,
    "photo": "photos/congress-st-at-sleeper-st.jpg"
  },
  {
    "id": 65,
    "name": "Boston Convention and Exhibition Center - Summer St at West Side Dr",
    "lat": 42.347763,
    "long": -71.04536,
    "photo": "photos/boston-convention-and-exhibition-center.jpg"
  },
  {
    "id": 66,
    "name": "Allston Green District - Griggs St at Commonwealth Ave",
    "lat": 42.34852,
    "long": -71.133947
  },
  {
    "id": 67,
    "name": "MIT at Mass Ave / Amherst St",
    "lat": 42.3581,
    "long": -71.093198,
    "photo": "photos/mit-at-mass-ave-amherst-st.jpg"
  },
  {
    "id": 68,
    "name": "Central Square at Mass Ave / Essex St",
    "lat": 42.36507,
    "long": -71.1031,
    "photo": "photos/central-square-at-mass-ave-essex-st.jpg"
  },
  {
    "id": 69,
    "name": "Coolidge Corner - Beacon St at Centre St",
    "lat": 42.341598,
    "long": -71.123338,
    "photo": "photos/coolidge-corner.jpg"
  },
  {
    "id": 70,
    "name": "Harvard Kennedy School at Bennett St / Eliot St",
    "lat": 42.371992,
    "long": -71.12227,
    "photo": "photos/harvard-kennedy-school-at-bennett-st.jpg"
  },
  {
    "id": 71,
    "name": "Conway Park - Somerville Avenue",
    "lat": 42.383405,
    "long": -71.107593
  },
  {
    "id": 72,
    "name": "One Broadway / Kendall Sq at Main St / 3rd St",
    "lat": 42.362613,
    "long": -71.084105,
    "photo": "photos/one-broadway-kendall-sq-at-main-st-third-st.jpg"
  },
  {
    "id": 73,
    "name": "Harvard Square at Brattle St / Eliot St",
    "lat": 42.373231,
    "long": -71.120886,
    "photo": "photos/harvard-square-at-brattle-st-eliot-st.jpg"
  },
  {
    "id": 74,
    "name": "Harvard Square at Mass Ave/ Dunster",
    "lat": 42.373268,
    "long": -71.118579,
    "photo": "photos/harvard-square-at-mass-ave-dunster.jpg"
  },
  {
    "id": 75,
    "name": "Lafayette Square at Mass Ave / Main St / Columbia St",
    "lat": 42.363465,
    "long": -71.100573,
    "photo": "photos/lafayette-square-at-mass-ave-main-st.jpg"
  },
  {
    "id": 76,
    "name": "Central Sq Post Office / Cambridge City Hall at Mass Ave / Pleasant St",
    "lat": 42.366426,
    "long": -71.105495,
    "photo": "photos/central-sq-po-cambridge-city-hall.jpg"
  },
  {
    "id": 77,
    "name": "Somerville City Hall",
    "lat": 42.386844,
    "long": -71.09812
  },
  {
    "id": 78,
    "name": "Union Square - Somerville",
    "lat": 42.379637,
    "long": -71.095319,
    "photo": "photos/union-square-somerville.jpg"
  },
  {
    "id": 79,
    "name": "Beacon St at Washington / Kirkland",
    "lat": 42.37842,
    "long": -71.105668
  },
  {
    "id": 80,
    "name": "MIT Stata Center at Vassar St / Main St",
    "lat": 42.361962,
    "long": -71.092053,
    "photo": "photos/mit-stata-center-at-vassar-st-main-st.jpg"
  },
  {
    "id": 81,
    "name": "Chinatown T Stop",
    "lat": 42.352409,
    "long": -71.062679,
    "photo": "photos/boylston-st-at-washington-st.jpg"
  },
  {
    "id": 82,
    "name": "Beacon St at Tappan St",
    "lat": 42.339335,
    "long": -71.13493,
    "photo": "photos/washington-square.jpg"
  },
  {
    "id": 84,
    "name": "CambridgeSide Galleria - CambridgeSide PL at Land Blvd",
    "lat": 42.366981,
    "long": -71.076472,
    "photo": "photos/cambridgeside-galleria-cambridgeside-pl-at-land-blvd.jpg"
  },
  {
    "id": 85,
    "name": "Spaulding Rehabilitation Hospital - Charlestown Navy Yard",
    "lat": 42.378338,
    "long": -71.048927,
    "photo": "photos/spaulding-rehabilitation-hospital.jpg"
  },
  {
    "id": 86,
    "name": "Brookline Village - Pearl Street at MBTA",
    "lat": 42.332799,
    "long": -71.116205
  },
  {
    "id": 87,
    "name": "Harvard University Housing - 115 Putnam Ave at Peabody Terrace",
    "lat": 42.366621,
    "long": -71.114214,
    "photo": "photos/harvard-university-housing-putnam-ave-at-peabody-terrace"
  },
  {
    "id": 88,
    "name": "Inman Square at Vellucci Plaza / Hampshire St",
    "lat": 42.374035,
    "long": -71.101427,
    "photo": "photos/inman-square-at-vellucci-plaza.jpg",
    "isLegacy": true
  },
  {
    "id": 89,
    "name": "Harvard Law School at Mass Ave / Jarvis St",
    "lat": 42.379011,
    "long": -71.119945,
    "photo": "photos/harvard-law-school-at-mass-ave-jarvis-st.jpg"
  },
  {
    "id": 90,
    "name": "Lechmere Station at Cambridge St / First St",
    "lat": 42.370677,
    "long": -71.076529,
    "photo": "photos/lechmere-station.jpg"
  },
  {
    "id": 91,
    "name": "One Kendall Square at Hampshire St / Portland St",
    "lat": 42.366277,
    "long": -71.09169
  },
  {
    "id": 92,
    "name": "University of Massachusetts Boston - Integrated Sciences Complex",
    "lat": 42.314507,
    "long": -71.041269
  },
  {
    "id": 93,
    "name": "JFK/UMass T Stop",
    "lat": 42.32034,
    "long": -71.05118
  },
  {
    "id": 94,
    "name": "Main St at Austin St",
    "lat": 42.375603,
    "long": -71.064608,
    "photo": "photos/main-st-at-austin-st.jpg"
  },
  {
    "id": 95,
    "name": "Cambridge St - at Columbia St / Webster Ave",
    "lat": 42.372969,
    "long": -71.094445,
    "photo": "photos/cambridge-st-at-columbia-st.jpg"
  },
  {
    "id": 96,
    "name": "Cambridge Main Library at Broadway / Trowbridge St",
    "lat": 42.373379,
    "long": -71.111075,
    "photo": "photos/cambridge-main-library-at-broadway-trowbridge-st.jpg"
  },
  {
    "id": 97,
    "name": "Harvard University River Houses at DeWolfe St / Cowperthwaite St",
    "lat": 42.36919,
    "long": -71.117141,
    "photo": "photos/harvard-river-houses-at-dewolfe-st.jpg"
  },
  {
    "id": 98,
    "name": "Warren St at Chelsea St",
    "lat": 42.371848,
    "long": -71.060292,
    "photo": "photos/warren-st-at-chelsea-st.jpg"
  },
  {
    "id": 99,
    "name": "Wilson Square",
    "lat": 42.385582,
    "long": -71.113341
  },
  {
    "id": 100,
    "name": "Davis Square",
    "lat": 42.396969,
    "long": -71.123024
  },
  {
    "id": 102,
    "name": "Powder House Circle - Nathan Tufts Park",
    "lat": 42.400877,
    "long": -71.116772,
    "photo": "photos/powder-house-circle.jpg"
  },
  {
    "id": 103,
    "name": "JFK Crossing at Harvard St. / Thorndike St.",
    "lat": 42.346563,
    "long": -71.128374
  },
  {
    "id": 104,
    "name": "Harvard University Radcliffe Quadrangle at Shepard St / Garden St",
    "lat": 42.380287,
    "long": -71.125107,
    "photo": "photos/harvard-radcliffe-quadrangle-shepard-st-garden-st.jpg"
  },
  {
    "id": 105,
    "name": "Lower Cambridgeport at Magazine St / Riverside Rd",
    "lat": 42.356954,
    "long": -71.113687
  },
  {
    "id": 106,
    "name": "Dudley Town Common - Mt Pleasant Ave at Blue Hill Ave",
    "lat": 42.325333,
    "long": -71.075354
  },
  {
    "id": 107,
    "name": "Ames St at Main St",
    "lat": 42.3625,
    "long": -71.08822,
    "photo": "photos/main-st-at-ames-st.jpg"
  },
  {
    "id": 108,
    "name": "Harvard University / SEAS Cruft-Pierce Halls at 29 Oxford St",
    "lat": 42.377945,
    "long": -71.116865,
    "photo": "photos/harvard-university-seas-cruft-pierce-halls.jpg"
  },
  {
    "id": 109,
    "name": "West End Park",
    "lat": 42.365908,
    "long": -71.064467
  },
  {
    "id": 110,
    "name": "Harvard University Gund Hall at Quincy St / Kirkland S",
    "lat": 42.376369,
    "long": -71.114025,
    "photo": "photos/harvard-university-gund-hall-quincy-kirkland.jpg"
  },
  {
    "id": 111,
    "name": "Packard Ave at Powderhouse Blvd",
    "lat": 42.40449,
    "long": -71.123413,
    "photo": "photos/packard-ave-at-powderhouse-blvd.jpg"
  },
  {
    "id": 112,
    "name": "Clarendon Hill at Broadway",
    "lat": 42.406302,
    "long": -71.132446,
    "photo": "photos/clarendon-hill-at-broadway.jpg"
  },
  {
    "id": 113,
    "name": "Andrew T Stop - Dorchester Ave at Dexter St",
    "lat": 42.330474,
    "long": -71.057017
  },
  {
    "id": 114,
    "name": "Teele Square",
    "lat": 42.402763,
    "long": -71.126908
  },
  {
    "id": 115,
    "name": "Porter Square Station",
    "lat": 42.387995,
    "long": -71.119084,
    "photo": "photos/porter-square-station.jpg"
  },
  {
    "id": 116,
    "name": "359 Broadway - Broadway at Fayette Street",
    "lat": 42.370803,
    "long": -71.104412,
    "photo": "photos/359-broadway-at-fayette-st.jpg"
  },
  {
    "id": 117,
    "name": "Binney St / Sixth St",
    "lat": 42.366095,
    "long": -71.086388
  },
  {
    "id": 118,
    "name": "Linear Park - Mass. Ave. at Cameron Ave. ",
    "lat": 42.397828,
    "long": -71.130516,
    "photo": "photos/linear-park-mass-ave-at-cameron-ave.jpg"
  },
  {
    "id": 119,
    "name": "South Boston Library - 646 E Broadway",
    "lat": 42.335741,
    "long": -71.03877,
    "photo": "photos/south-boston-library.jpg"
  },
  {
    "id": 120,
    "name": "Beacon St at Charles St",
    "lat": 42.356052,
    "long": -71.069849,
    "photo": "photos/charles-st-at-beacon-st.jpg"
  },
  {
    "id": 121,
    "name": "W Broadway at Dorchester St",
    "lat": 42.335693,
    "long": -71.045859
  },
  {
    "id": 122,
    "name": "Burlington Ave at Brookline Ave",
    "lat": 42.345733,
    "long": -71.100694
  },
  {
    "id": 124,
    "name": "Curtis Hall - South St at Centre St",
    "lat": 42.309054,
    "long": -71.11543
  },
  {
    "id": 125,
    "name": "Hyde Square - Barbara St at Centre St",
    "lat": 42.320998,
    "long": -71.110833
  },
  {
    "id": 126,
    "name": "Egleston Square - Atherton St at Washington St",
    "lat": 42.315692,
    "long": -71.098634
  },
  {
    "id": 128,
    "name": "E Cottage St at Columbia Rd",
    "lat": 42.320561,
    "long": -71.06198
  },
  {
    "id": 129,
    "name": "Hayes Square - Vine St at Moulton St",
    "lat": 42.377022,
    "long": -71.056605,
    "photo": "photos/hayes-square-at-vine-st.jpg"
  },
  {
    "id": 130,
    "name": "Upham's Corner",
    "lat": 42.317283,
    "long": -71.065363
  },
  {
    "id": 131,
    "name": "Jackson Square T Stop",
    "lat": 42.322931,
    "long": -71.100141,
    "photo": "photos/jackson-square-t-stop.jpg"
  },
  {
    "id": 133,
    "name": "Green Street T Stop - Green St at Amory St",
    "lat": 42.310579,
    "long": -71.107341,
    "photo": "photos/green-street-t-stop.jpg"
  },
  {
    "id": 134,
    "name": "Boylston St at Dartmouth St",
    "lat": 42.350413,
    "long": -71.07655,
    "photo": "photos/boylston-st-at-dartmouth-st.jpg"
  },
  {
    "id": 135,
    "name": "ID Building East",
    "lat": 42.344827,
    "long": -71.028664,
    "photo": "photos/id-building-east.jpg"
  },
  {
    "id": 136,
    "name": "ID Building West",
    "lat": 42.344796,
    "long": -71.031614,
    "photo": "photos/id-building-west.jpg"
  },
  {
    "id": 137,
    "name": "Magoun Square at Trum Field",
    "lat": 42.398365,
    "long": -71.107818,
    "photo": "photos/magoun-square-at-trum-field.jpg"
  },
  {
    "id": 138,
    "name": "Newmarket Square T Stop - Massachusetts Ave at Newmarket Square",
    "lat": 42.326599,
    "long": -71.066498
  },
  {
    "id": 139,
    "name": "Dana Park",
    "lat": 42.36178,
    "long": -71.1081
  },
  {
    "id": 140,
    "name": "Danehy Park",
    "lat": 42.388966,
    "long": -71.132788,
    "photo": "photos/danehy-park.jpg"
  },
  {
    "id": 141,
    "name": "Kendall Street",
    "lat": 42.36356,
    "long": -71.082168
  },
  {
    "id": 142,
    "name": "Alewife Station at Russell Field",
    "lat": 42.396105,
    "long": -71.139459,
    "photo": "photos/alewife-station-at-russell-field.jpg"
  },
  {
    "id": 143,
    "name": "EF - North Point Park",
    "lat": 42.369885,
    "long": -71.069957,
    "photo": "photos/ef-north-point-park.jpg"
  },
  {
    "id": 144,
    "name": "Rogers St & Land Blvd",
    "lat": 42.36575798214837,
    "long": -71.07699394226073
  },
  {
    "id": 145,
    "name": "Rindge Avenue - O'Neill Library",
    "lat": 42.392766,
    "long": -71.129042,
    "photo": "photos/rindge-avenue-oneill-library.jpg"
  },
  {
    "id": 146,
    "name": "Murphy Skating Rink - 1880 Day Blvd",
    "lat": 42.336448,
    "long": -71.023739,
    "photo": "photos/day-boulevard.jpg"
  },
  {
    "id": 149,
    "name": "175 N Harvard St",
    "lat": 42.363796,
    "long": -71.129164
  },
  {
    "id": 150,
    "name": "State Street at Channel Center",
    "lat": 42.344137,
    "long": -71.052608
  },
  {
    "id": 151,
    "name": "Surface Rd at India St",
    "lat": 42.358155,
    "long": -71.052163,
    "photo": "photos/surface-rd-at-india-st.jpg"
  },
  {
    "id": 152,
    "name": "Ink Block - Harrison Ave at Herald St",
    "lat": 42.345901,
    "long": -71.063187,
    "photo": "photos/ink-block.jpg"
  },
  {
    "id": 156,
    "name": "Somerville Hospital",
    "lat": 42.39088801721338,
    "long": -71.10962569713591
  },
  {
    "id": 157,
    "name": "Seaport Blvd at Sleeper St",
    "lat": 42.353178091863,
    "long": -71.048173569234,
    "photo": "photos/seaport-blvd-at-sleeper-st.jpg"
  },
  {
    "id": 159,
    "name": "S Huntington Ave at Heath St",
    "lat": 42.327973,
    "long": -71.110897
  },
  {
    "id": 160,
    "name": "Wentworth Institute of Technology - Huntington Ave at Vancouver St",
    "lat": 42.337586,
    "long": -71.096271,
    "photo": "photos/wentworth-institute-of-technology.jpg"
  },
  {
    "id": 161,
    "name": "W Broadway at D St",
    "lat": 42.339109,
    "long": -71.051443
  },
  {
    "id": 162,
    "name": "Franklin Park - Seaver St at Humbolt Ave",
    "lat": 42.309796,
    "long": -71.092225
  },
  {
    "id": 163,
    "name": "The Lawn on D",
    "lat": 42.344792,
    "long": -71.044024,
    "photo": "photos/lawn-on-d.jpg"
  },
  {
    "id": 167,
    "name": "Ryan Playground - Dorchester Ave at Harbor View St",
    "lat": 42.317642,
    "long": -71.056664
  },
  {
    "id": 169,
    "name": "Edwards Playground - Main St at Eden St",
    "lat": 42.378965,
    "long": -71.068607,
    "photo": "photos/main-st-at-eden-st.jpg"
  },
  {
    "id": 170,
    "name": "Franklin Park Zoo - Franklin Park Rd at Blue Hill Ave",
    "lat": 42.303469,
    "long": -71.085347
  },
  {
    "id": 171,
    "name": "Bunker Hill Community College",
    "lat": 42.37409,
    "long": -71.06906,
    "photo": "photos/bunker-hill-community-college.jpg"
  },
  {
    "id": 173,
    "name": "Savin Hill T Stop - S Sydney St at Bay St",
    "lat": 42.3106,
    "long": -71.0539
  },
  {
    "id": 174,
    "name": "Washington St at Brock St",
    "lat": 42.348953,
    "long": -71.160317
  },
  {
    "id": 175,
    "name": "Brighton Center - Washington St at Cambridge St",
    "lat": 42.348949,
    "long": -71.150272
  },
  {
    "id": 176,
    "name": "Lesley University",
    "lat": 42.386748,
    "long": -71.119019,
    "photo": "photos/lesley-university.jpg"
  },
  {
    "id": 177,
    "name": "University Park",
    "lat": 42.362648,
    "long": -71.100061,
    "photo": "photos/university-park.jpg"
  },
  {
    "id": 178,
    "name": "MIT Pacific St at Purrington St",
    "lat": 42.359573,
    "long": -71.101295
  },
  {
    "id": 179,
    "name": "MIT Vassar St",
    "lat": 42.355601,
    "long": -71.103945,
    "photo": "photos/mit-at-vassar-st.jpg"
  },
  {
    "id": 180,
    "name": "Mt Auburn",
    "lat": 42.374786,
    "long": -71.133202
  },
  {
    "id": 181,
    "name": "Huron Ave At Vassal Lane",
    "lat": 42.381650612901,
    "long": -71.134269814984,
    "photo": "photos/huron-ave-at-vassal-lane.jpg"
  },
  {
    "id": 182,
    "name": "Museum of Science",
    "lat": 42.36769,
    "long": -71.071163
  },
  {
    "id": 183,
    "name": "Alewife MBTA at Steel Place",
    "lat": 42.395588,
    "long": -71.142606,
    "photo": "photos/alewife-mbta-at-steel-place.jpg"
  },
  {
    "id": 184,
    "name": "Sidney Research Campus/ Erie Street at Waverly",
    "lat": 42.357753,
    "long": -71.103934,
    "photo": "photos/sidney-research-campus.jpg"
  },
  {
    "id": 185,
    "name": "Third at Binney",
    "lat": 42.365445,
    "long": -71.082771,
    "photo": "photos/third-at-binney-st.jpg"
  },
  {
    "id": 186,
    "name": "Congress St at Northern Ave",
    "lat": 42.3481,
    "long": -71.03764,
    "photo": "photos/congress-st-at-northern-ave.jpg"
  },
  {
    "id": 187,
    "name": "Cypress St at Clark Playground",
    "lat": 42.32784317478686,
    "long": -71.1253622174263
  },
  {
    "id": 188,
    "name": "Foss Park",
    "lat": 42.39108438146733,
    "long": -71.09039425849915
  },
  {
    "id": 189,
    "name": "Kendall T",
    "lat": 42.362428,
    "long": -71.084955
  },
  {
    "id": 190,
    "name": "Nashua Street at Red Auerbach Way",
    "lat": 42.365673,
    "long": -71.064263
  },
  {
    "id": 191,
    "name": "Tappan St at Brookline Hills MBTA",
    "lat": 42.332096063019364,
    "long": -71.128458827734
  },
  {
    "id": 192,
    "name": "Purchase St at Pearl St",
    "lat": 42.354659,
    "long": -71.053181,
    "photo": "photos/purchase-st-at-pearl-st.jpg"
  },
  {
    "id": 193,
    "name": "Brookline Town Hall",
    "lat": 42.332891,
    "long": -71.116583
  },
  {
    "id": 194,
    "name": "Broadway St at Mt Pleasant St",
    "lat": 42.386141,
    "long": -71.078281,
    "photo": "photos/broadway-st-at-mt-pleasant-st.jpg"
  },
  {
    "id": 195,
    "name": "Child St at North St",
    "lat": 42.37206,
    "long": -71.072026,
    "photo": "photos/brian-p-murphy-staircase-at-child-st.jpg"
  },
  {
    "id": 196,
    "name": "Roxbury YMCA - Warren St at MLK Blvd",
    "lat": 42.317873,
    "long": -71.082431
  },
  {
    "id": 197,
    "name": "MLK Blvd at Washington St",
    "lat": 42.321438,
    "long": -71.091261
  },
  {
    "id": 199,
    "name": "Upham's Corner T Stop - Magnolia St at Dudley St",
    "lat": 42.318697,
    "long": -71.069781
  },
  {
    "id": 200,
    "name": "Washington St at Melnea Cass Blvd",
    "lat": 42.332817,
    "long": -71.081198
  },
  {
    "id": 201,
    "name": "NCAAA - Walnut Ave at Crawford St",
    "lat": 42.316902,
    "long": -71.091946
  },
  {
    "id": 202,
    "name": "Grove Hall Library - 41 Geneva Ave",
    "lat": 42.30791,
    "long": -71.080952
  },
  {
    "id": 203,
    "name": "Columbia Rd at Ceylon St",
    "lat": 42.309572,
    "long": -71.0729
  },
  {
    "id": 204,
    "name": "Walnut Ave at Warren St",
    "lat": 42.324081,
    "long": -71.083235
  },
  {
    "id": 205,
    "name": "Bowdoin St at Quincy St",
    "lat": 42.307852,
    "long": -71.065122
  },
  {
    "id": 206,
    "name": "Government Center - Cambridge St at Court St",
    "lat": 42.359802515995526,
    "long": -71.05960782626425
  },
  {
    "id": 207,
    "name": "Faneuil St at Market St",
    "lat": 42.35484,
    "long": -71.150226
  },
  {
    "id": 208,
    "name": "Oak Square - 615 Washington St",
    "lat": 42.35057,
    "long": -71.166491
  },
  {
    "id": 209,
    "name": "Chelsea St at Saratoga St",
    "lat": 42.379772,
    "long": -71.027448,
    "photo": "photos/chelsea-st-at-saratoga-st.jpg"
  },
  {
    "id": 210,
    "name": "Bennington St at Byron St",
    "lat": 42.383378,
    "long": -71.01612,
    "photo": "photos/bennington-st-at-byron-st.jpg"
  },
  {
    "id": 211,
    "name": "Piers Park",
    "lat": 42.365432,
    "long": -71.036257,
    "photo": "photos/piers-park.jpg"
  },
  {
    "id": 212,
    "name": "Maverick Square - Lewis Mall",
    "lat": 42.368844,
    "long": -71.039778,
    "photo": "photos/maverick-square-lewis-mall.jpg"
  },
  {
    "id": 213,
    "name": "East Boston Neighborhood Health Center - 20 Maverick Square",
    "lat": 42.369536,
    "long": -71.039431,
    "photo": "photos/ebnhc-maverick-square.jpg"
  },
  {
    "id": 214,
    "name": "Airport T Stop - Bremen St at Brooks St",
    "lat": 42.375339,
    "long": -71.031304,
    "photo": "photos/airport-t-stop.jpg"
  },
  {
    "id": 215,
    "name": "The Eddy - New St at Sumner St",
    "lat": 42.370744,
    "long": -71.044201,
    "photo": "photos/the-eddy-new-st-at-sumner-st.jpg"
  },
  {
    "id": 216,
    "name": "Glendon St at Condor St",
    "lat": 42.382404,
    "long": -71.030243,
    "photo": "photos/glendon-st-at-condor-st.jpg"
  },
  {
    "id": 217,
    "name": "Orient Heights T Stop - Bennington St at Saratoga St",
    "lat": 42.386781,
    "long": -71.006098,
    "photo": "photos/orient-heights-t-stop.jpg"
  },
  {
    "id": 218,
    "name": "Watermark Seaport - Boston Wharf Rd at Seaport Blvd",
    "lat": 42.351586,
    "long": -71.045693,
    "photo": "photos/watermark-seaport.jpg"
  },
  {
    "id": 219,
    "name": "Boston East - 126 Border St",
    "lat": 42.374307,
    "long": -71.038078,
    "photo": "photos/boston-east.jpg"
  },
  {
    "id": 221,
    "name": "Verizon Innovation Hub 10 Ware Street",
    "lat": 42.372508649973,
    "long": -71.113053560257,
    "photo": "photos/verizon-innovation-hub-10-ware-st.jpg"
  },
  {
    "id": 222,
    "name": "Troy Boston",
    "lat": 42.343749,
    "long": -71.062256,
    "photo": "photos/troy-boston.jpg"
  },
  {
    "id": 224,
    "name": "Fresh Pond Reservation",
    "lat": 42.382678275219,
    "long": -71.143478951426,
    "photo": "photos/fresh-pond-reservation.jpg"
  },
  {
    "id": 225,
    "name": "Cambridge Dept. of Public Works -147 Hampshire St.",
    "lat": 42.371197277594,
    "long": -71.097598671913,
    "photo": "photos/cambridge-department-of-public-works.jpg"
  },
  {
    "id": 226,
    "name": "Commonwealth Ave At Babcock St",
    "lat": 42.351547347914,
    "long": -71.121262460947
  },
  {
    "id": 227,
    "name": "Silber Way",
    "lat": 42.34949599514,
    "long": -71.10057592392,
    "photo": "photos/silber-way.jpg"
  },
  {
    "id": 228,
    "name": "One Memorial Drive",
    "lat": 42.361619320767,
    "long": -71.08043550521
  },
  {
    "id": 232,
    "name": "Four Corners - 157 Washington St",
    "lat": 42.30412792739,
    "long": -71.079295277596
  },
  {
    "id": 233,
    "name": "St Mary's",
    "lat": 42.346197076555455,
    "long": -71.10728681087494
  },
  {
    "id": 234,
    "name": "Broadway at Central St",
    "lat": 42.39517150121575,
    "long": -71.09850591982195
  },
  {
    "id": 235,
    "name": "East Somerville Library (Broadway and Illinois)",
    "lat": 42.3876281075134,
    "long": -71.08318716287613,
    "photo": "photos/east-somerville-library.jpg"
  },
  {
    "id": 236,
    "name": "Assembly Square T",
    "lat": 42.392232840046276,
    "long": -71.07746601104736,
    "photo": "photos/assembly-square-t-stop.jpg"
  },
  {
    "id": 239,
    "name": "Community Path at Cedar Street",
    "lat": 42.39407223665884,
    "long": -71.11133694648743
  },
  {
    "id": 255,
    "name": "Park St at Norwell St",
    "lat": 42.2944167,
    "long": -71.0783056
  },
  {
    "id": 258,
    "name": "Gallivan Blvd at Adams St",
    "lat": 42.28297567840305,
    "long": -71.05466698296368
  },
  {
    "id": 259,
    "name": "Washington St at Bradlee St",
    "lat": 42.297722,
    "long": -71.073
  },
  {
    "id": 260,
    "name": "Fields Corner T Stop",
    "lat": 42.2996667,
    "long": -71.0605833
  },
  {
    "id": 268,
    "name": "Centre St at Knoll St",
    "lat": 42.2938,
    "long": -71.136941
  },
  {
    "id": 271,
    "name": "Ashmont T Stop",
    "lat": 42.2856944,
    "long": -71.0641389
  },
  {
    "id": 272,
    "name": "Shawmut T Stop",
    "lat": 42.292917,
    "long": -71.06575
  },
  {
    "id": 273,
    "name": "Forest Hills",
    "lat": 42.300923,
    "long": -71.114249
  },
  {
    "id": 279,
    "name": "Williams St at Washington St",
    "lat": 42.306539,
    "long": -71.107669
  },
  {
    "id": 280,
    "name": "Main St at Baldwin St",
    "lat": 42.380857,
    "long": -71.070629
  },
  {
    "id": 282,
    "name": "Stony Brook T Stop",
    "lat": 42.316966,
    "long": -71.104374
  },
  {
    "id": 296,
    "name": "Farragut Rd at E. 6th St",
    "lat": 42.3334,
    "long": -71.02495
  },
  {
    "id": 318,
    "name": "Ames St at Broadway",
    "lat": 42.3636929,
    "long": -71.0875672
  },
  {
    "id": 319,
    "name": "84 Cambridgepark Dr",
    "lat": 42.3936,
    "long": -71.143941
  },
  {
    "id": 327,
    "name": "Main St at Thompson Sq",
    "lat": 42.374878467440965,
    "long": -71.06383498767171
  },
  {
    "id": 328,
    "name": "Grove St at Community Path",
    "lat": 42.396386809455,
    "long": -71.12011306006025
  },
  {
    "id": 329,
    "name": "Washington St at Myrtle St",
    "lat": 42.381699831636816,
    "long": -71.08377588917392,
    "photo": "photos/washington-st-at-myrtle-st.jpg"
  },
  {
    "id": 330,
    "name": "30 Dane St",
    "lat": 42.38100143038052,
    "long": -71.10402522613185
  },
  {
    "id": 331,
    "name": "Huntington Ave at Mass Art",
    "lat": 42.336585554561154,
    "long": -71.0988699646623
  },
  {
    "id": 332,
    "name": "Harvard Ave at Brainerd Rd",
    "lat": 42.34953016890375,
    "long": -71.13022770741735
  },
  {
    "id": 333,
    "name": "699 Mt Auburn St",
    "lat": 42.37500235137831,
    "long": -71.14871613699506
  },
  {
    "id": 334,
    "name": "Mass Ave at Hadley/Walden",
    "lat": 42.39120971915856,
    "long": -71.12260755160605
  },
  {
    "id": 335,
    "name": "Harvard St at Greene-Rose Heritage Park",
    "lat": 42.36599432867437,
    "long": -71.09522221614498
  },
  {
    "id": 336,
    "name": "Mattapan T Stop",
    "lat": 42.267902,
    "long": -71.093641
  },
  {
    "id": 337,
    "name": "Roslindale Village - South St",
    "lat": 42.287072,
    "long": -71.127754
  },
  {
    "id": 338,
    "name": "Commonwealth Ave at Kelton St",
    "lat": 42.348358628170445,
    "long": -71.13997217276847
  },
  {
    "id": 339,
    "name": "Archdale Rd at Washington St",
    "lat": 42.29266592872725,
    "long": -71.12119538714069
  },
  {
    "id": 340,
    "name": "Blue Hill Ave at Almont St",
    "lat": 42.274620671812244,
    "long": -71.09372552493369
  },
  {
    "id": 341,
    "name": "Roslindale Village - Washington St",
    "lat": 42.28630716010807,
    "long": -71.12820532182013
  },
  {
    "id": 342,
    "name": "Boylston St at Jersey St",
    "lat": 42.344650628878306,
    "long": -71.09732501226972
  },
  {
    "id": 343,
    "name": "Morton St T",
    "lat": 42.280725142920296,
    "long": -71.08617242434775
  },
  {
    "id": 344,
    "name": "Commonwealth Ave at Chiswick Rd",
    "lat": 42.34024644768889,
    "long": -71.15168806174552
  },
  {
    "id": 345,
    "name": "Park Plaza at Charles St S.",
    "lat": 42.351828068920675,
    "long": -71.06781138111728
  },
  {
    "id": 346,
    "name": "Cleveland Circle",
    "lat": 42.335543083570826,
    "long": -71.15061519672052
  },
  {
    "id": 347,
    "name": "Thetford Ave at Norfolk St",
    "lat": 42.286212948246096,
    "long": -71.07942931372236
  },
  {
    "id": 348,
    "name": "Talbot Ave At Blue Hill Ave",
    "lat": 42.2945833,
    "long": -71.087111
  },
  {
    "id": 349,
    "name": "Washington St at Talbot Ave",
    "lat": 42.290333,
    "long": -71.071806
  },
  {
    "id": 350,
    "name": "Codman Square Library",
    "lat": 42.2873611,
    "long": -71.071111
  },
  {
    "id": 351,
    "name": "Faneuil St at Arlington St",
    "lat": 42.35276620545606,
    "long": -71.15988485533308
  },
  {
    "id": 352,
    "name": "Ring Rd",
    "lat": 42.348278385426255,
    "long": -71.08044855314802
  },
  {
    "id": 353,
    "name": "Mattapan Library",
    "lat": 42.2773889,
    "long": -71.09325
  },
  {
    "id": 354,
    "name": "Washington St at Egremont Rd",
    "lat": 42.34286835071959,
    "long": -71.14127840855872
  },
  {
    "id": 355,
    "name": "Bennington St at Constitution Beach",
    "lat": 42.385223935870535,
    "long": -71.01063068965232,
    "photo": "photos/bennington-st-at-constitution-beach.jpg"
  },
  {
    "id": 356,
    "name": "Charlestown Navy Yard",
    "lat": 42.374124549426526,
    "long": -71.05481199938367
  },
  {
    "id": 357,
    "name": "Centre St at Seaverns Ave",
    "lat": 42.3121203,
    "long": -71.1142981
  },
  {
    "id": 358,
    "name": "Medford St at Charlestown BCYF",
    "lat": 42.380429474494896,
    "long": -71.06055721676967
  },
  {
    "id": 359,
    "name": "One Brigham Circle",
    "lat": 42.333922701369964,
    "long": -71.10446508982932
  },
  {
    "id": 360,
    "name": "Bartlett St at John Elliot Sq",
    "lat": 42.3294633,
    "long": -71.0901582
  },
  {
    "id": 361,
    "name": "Deerfield St at Commonwealth Ave",
    "lat": 42.34924376955301,
    "long": -71.09728209692548
  },
  {
    "id": 362,
    "name": "Columbia Rd at Tierney Community Center",
    "lat": 42.33023070528729,
    "long": -71.05060093123029
  },
  {
    "id": 363,
    "name": "Harrison Ave at Mullins Way",
    "lat": 42.34521562115022,
    "long": -71.0638403149278
  },
  {
    "id": 364,
    "name": "Tremont St at Northampton St",
    "lat": 42.33889559644165,
    "long": -71.08149975611013
  },
  {
    "id": 365,
    "name": "Harrison Ave at Bennet St",
    "lat": 42.34942609892521,
    "long": -71.06209959843909
  },
  {
    "id": 366,
    "name": "Broadway T Stop",
    "lat": 42.34278116224413,
    "long": -71.05747275072645
  },
  {
    "id": 367,
    "name": "Vassal Lane at Tobin/VLUS",
    "lat": 42.3839322489048,
    "long": -71.13961271959852
  },
  {
    "id": 368,
    "name": "Blue Hill Ave at Southwood St",
    "lat": 42.317860205899876,
    "long": -71.07798628527235
  },
  {
    "id": 369,
    "name": "Boston Public Market",
    "lat": 42.36254854409333,
    "long": -71.0573735833168
  },
  {
    "id": 370,
    "name": "Dartmouth St at Newbury St",
    "lat": 42.35096144421219,
    "long": -71.07782810926437
  },
  {
    "id": 371,
    "name": "700 Huron Ave",
    "lat": 42.380788172914286,
    "long": -71.15412890911102
  },
  {
    "id": 372,
    "name": "Boylston St at Exeter St",
    "lat": 42.349589423682445,
    "long": -71.0794677917329
  },
  {
    "id": 373,
    "name": "Belgrade Ave at Walworth St",
    "lat": 42.28634589486312,
    "long": -71.13672129828046
  },
  {
    "id": 374,
    "name": "Tremont St at Hamilton Pl",
    "lat": 42.35668334969929,
    "long": -71.06166645884514
  },
  {
    "id": 376,
    "name": "Honan Library",
    "lat": 42.36027370454934,
    "long": -71.12852452327388
  },
  {
    "id": 377,
    "name": "Perry Park",
    "lat": 42.37927324600841,
    "long": -71.10341902831351
  },
  {
    "id": 378,
    "name": "191 Beacon St",
    "lat": 42.38032335045416,
    "long": -71.10878612855231
  },
  {
    "id": 379,
    "name": "Tremont St at W. Dedham St",
    "lat": 42.34254913737952,
    "long": -71.07421449387857
  },
  {
    "id": 380,
    "name": "Mass Ave at Albany St",
    "lat": 42.36135837662249,
    "long": -71.09670273977825
  },
  {
    "id": 381,
    "name": "Inman Square at Springfield St.",
    "lat": 42.37438408515815,
    "long": -71.1001574621514
  },
  {
    "id": 384,
    "name": "Clarendon St at Commonwealth Ave",
    "lat": 42.35219035145307,
    "long": -71.0760041699723
  },
  {
    "id": 385,
    "name": "Albany St at E. Brookline St",
    "lat": 42.33664795427071,
    "long": -71.0689445958451
  }
];

// styling for the google map
var mapStyles = [
  {
    featureType: "administrative",
    elementType: "labels",
    stylers: [
      { visibility: "on" }
    ]
  },
  {
    featureType: "water",
    elementType: "geometry.fill",
    stylers: [
      { color: "#FFFFFF" }
    ]
  },
  {
    featureType: "water",
    elementType: "labels",
    stylers: [
      { visibility: "off" }
    ]
  },
  {
    featureType: "landscape",
    elementType: "geometry.fill",
    stylers: [
      { color: "#DDDDDD" }
    ]
  },
  {
    featureType: "landscape",
    elementType: "labels",
    stylers: [
      { visibility: "off" }
    ]
  },
  {
    featureType: "road.arterial",
    elementType: "geometry.fill",
    stylers: [
      { color: "#CCCCCC" }
    ]
  },
  {
    featureType: "road",
    elementType: "labels",
    stylers: [
      { visibility: "on" }
    ]
  },
  {
    featureType: "road.highway",
    elementType: "geometry",
    stylers: [
      { color: "#CCCCCC" }
    ]
  },
  {
    featureType: "road.local",
    elementType: "geometry",
    stylers: [
      { color: "#D5D5D5" }
    ]
  },
  {
    featureType: "poi",
    elementType: "all",
    stylers: [
      { visibility: "off" }
    ]
  },
  {
    featureType: "transit",
    elementType: "all",
    stylers: [
      { visibility: "off" }
    ]
  }
];

// create station lookup object
var numStations = stations.length;
var stationLookup = {};
for (var i = 0; i < numStations; i++) {
  stationLookup[stations[i].id] = stations[i];
}

// stations we've visited split by day
var trips = [
  {
    color: '#f1c40f',
    date: '2017-05-28',
    stations: [107, 72, 60, 120, 58, 42, 81, 22]
  },
  {
    color: '#2980b9',
    date: '2017-08-13',
    stations: [22, 192, 43, 151, 20, 40, 98, 85, 129, 94, 169, 171, 84, 185, 80, 67, 53, 52]
  },
  {
    color: '#e67e22',
    date: '2018-03-03',
    stations: [182, 84, 90, 195, 143, 98, 94]
  },
  {
    color: '#e67e22',
    date: '2018-03-18',
    stations: [22, 65, 119, 146, 163, 22]
  },
  {
    color: '#c0392b',
    date: '2018-03-30',
    stations: [94, 47, 20, 151, 157]
  },
  {
    color: '#2ecc71',
    date: '2018-03-31',
    stations: [82, 69, 11, 30, 14, 3, 160, 46, 21, 16, 49, 81]
  },
  {
    color: '#0000ff',
    date: '2018-06-23',
    stations: [45, 55, 61, 36, 134, 50, 42, 81]
  },
  {
    color: '#ff0000',
    date: '2018-06-24',
    stations: [124, 133, 131, 27, 12, 57, 25, 4, 152, 222, 81]
  },
  {
    color: '#00ff00',
    date: '2018-06-30',
    stations: [100, 114, 102, 137, 111, 112, 118, 183, 142, 145, 140, 224, 181, 74]
  },
  {
    color: '#27ae60',
    date: '2018-09-08',
    stations: [236, 194, 235, 329, 78, 88, 95, 225, 116, 76, 68, 75, 177, 184, 179, 9, 10, 227]
  },
  {
    color: '#d35400',
    date: '2019-05-11',
    stations: [76, 87, 97, 70, 73, 221, 96, 110, 108, 89, 104, 176, 115]
  },
  {
    color: '#16a085',
    date: '2019-05-17',
    stations: [59, 64, 157, 218, 24, 7, 31, 186, 136, 135]
  },
  {
    color: '#1abc9c',
    date: '2019-05-19',
    stations: [217, 355, 210, 209, 216, 214, 219, 215, 212, 213, 211]
  }
];

function diffStations() {
  var changesDetected = false;
  var numNameChanged = 0;
  var unaccounted = [];

  if ((typeof newStations == 'undefined') || !newStations || !newStations.stations) {
    return;
  }

  // find new stations and ones whose name has changed
  newStations.stations.forEach(newStation => {
    var found = stations.find(station => station.id === newStation.id);
    if (!found) {
      unaccounted.push({
        id: newStation.id,
        name: newStation.s,
        lat: newStation.la,
        long: newStation.lo
      });
      console.log('new station', newStation.s);
    } else if (found.name !== newStation.s) {
      console.log('station ' + newStation.id + ' name changed from "' + found.name + '" to "' + newStation.s + '"');
      found.name = newStation.s;
      numNameChanged++;
    }
  });

  // find stations that kept the same name but changed ids
  const duplicatedSameNameStations = stations.filter(station => !!newStations.stations.find(
    newStation => (station.id !== newStation.id) && (station.name === newStation.s)
  ));
  if (duplicatedSameNameStations.length) {
    console.log(duplicatedSameNameStations.length + ' stations have been duplicated with the same name', duplicatedSameNameStations);
  } else {
    console.log('no duplicated stations with the same name found');
  }

  // find stations that kept the same location but changed ids
  const duplicatedSameLocationStations = stations.filter(station => !!newStations.stations.find(
    newStation => (station.id !== newStation.id) && (station.lat === newStation.la) && (station.long === newStation.lo)
  ));
  if (duplicatedSameLocationStations.length) {
    console.log(duplicatedSameLocationStations.length + ' stations have been duplicated with the same location', duplicatedSameLocationStations);
  } else {
    console.log('no duplicated stations with the same location found');
  }

  if (newStations.stations.length < stations.length) {
    const legacyStations = stations.filter(station => !newStations.stations.find(newStation => station.id === newStation.id));
    if (legacyStations.length) {
      console.log(legacyStations.length + ' legacy stations found', legacyStations);
    }
  }

  if (unaccounted && unaccounted.length > 0) {
    stations = stations.concat(unaccounted);
    stations.sort((a, b) => {
      return (a.id < b.id) ? -1 : ((a.id > b.id) ? 1 : 0);
    });
    console.log(unaccounted.length + ' new stations found');
    changesDetected = true;
  } else {
    console.log('no new stations found');
  }

  if (numNameChanged > 0) {
    console.log(numNameChanged + ' station name changes detected');
    changesDetected = true;
  } else {
    console.log('no station name changes detected');
  }

  if (changesDetected) {
    console.log(JSON.stringify(stations));
  }
}

diffStations();

function drawDayRoute(visited, color, map) {
  var numVisited = visited.length;
  var dayCoords = [];

  for (var i = 0; i < numVisited; i++) {
    dayCoords.push({
      lat: stationLookup[visited[i]].lat,
      lng: stationLookup[visited[i]].long
    });
  }

  var dayLine = new google.maps.Polyline({
    path: dayCoords,
    geodesic: true,
    strokeColor: color,
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  dayLine.setMap(map);
}

function initialize() {
  var mapOptions = {
    center: { lat: 42.3615287, lng: -71.0677415},
    zoom: 14,
    disableDefaultUI: false,
    fullscreenControl: false,
    mapTypeControl: false,
    streetViewControl: false,
    styles: mapStyles
  };

  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  var visited = [];
  var numTrips = trips.length;
  for (var i = 0; i < numTrips; i++) {
    visited = _.union(visited, trips[i].stations);
  }

  var numStations = stations.length;
  var numVisited = visited.length;

  var percentComplete = Math.round((numVisited / numStations) * 100);
  console.log(numVisited + ' stations visited, ' + (numStations - numVisited) + ' stations remaining, ' + numStations + ' stations total, ' + percentComplete + '% complete');

  var completedBar = document.getElementsByClassName('ProgressBar-completed')[0];
  completedBar.style.width = `${percentComplete}%`;

  var percentageEl = document.getElementsByClassName('ProgressBar-percentage')[0];
  percentageEl.innerHTML = `${percentComplete}%`;

  var stationsVisitedEl = document.getElementsByClassName('ProgressBar-stationsComplete')[0];
  stationsVisitedEl.innerHTML = `${numVisited} stations visited`;

  var numStationsEl = document.getElementsByClassName('ProgressBar-max')[0];
  numStationsEl.innerHTML = numStations;

  var reversedTrips = trips.slice().reverse();
  var tripHtml = [
    '<ul>',
    ...reversedTrips.map(trip => {
      const dateObj = moment(trip.date, 'YYYY-MM-DD');
      return `<li>${dateObj.format('MMM D, YYYY')} - ${trip.stations.length} stations</li>`;
    }),
    '</ul>'
  ].join('');
  var tripHistoryEl = document.getElementsByClassName('TripHistory')[0];
  tripHistoryEl.innerHTML = tripHtml;

  for (var i = 0; i < numStations; i++) {
    let isVisited = false;
    for (var j = 0; j < numVisited; j++) {
      if (stations[i].id === visited[j]) {
        isVisited = true;
        var marker = new google.maps.Marker({
          icon: {
            scaledSize: new google.maps.Size(20, 20),
            url: stations[i].photo || 'img/marker-filled.png',
            strokeColor: '#000000'
          },
          map: map,
          position: new google.maps.LatLng(stations[i].lat, stations[i].long),
          title: stations[i].name,
          photo: stations[i].photo,
          isLegacy: stations[i].isLegacy
        });
        break;
      }
    }
    if (!isVisited) {
      var marker = new google.maps.Marker({
        icon: {
          scaledSize: new google.maps.Size(20, 20),
          url: 'img/marker-outline.png'
        },
        map: map,
        position: new google.maps.LatLng(stations[i].lat, stations[i].long),
        title: stations[i].name,
        photo: stations[i].photo
      });
    }

    var infoWindow = new google.maps.InfoWindow();
    google.maps.event.addListener(marker, 'click', function () {
      var content = '<h4 style="margin: 0; width: 200px;">' + this.title + (this.isLegacy ? ' (Legacy)' : '') + '</h4>';
      if (this.photo) {
        content += '<img src="' + this.photo + '" style="margin-top: 10px; height: 200px; width: 200px;" />';
      }
      infoWindow.setContent(content);
      infoWindow.open(map, this);
    });
  }

  for (var i = 0; i < numTrips; i++) {
    drawDayRoute(trips[i].stations, trips[i].color, map);
  }
}

google.maps.event.addDomListener(window, 'load', initialize);
